# AzurLaneSecretary
支持立绘和SD小人展示，暂不支持Live2D动画，运行过程中按Tab切换模式，按Esc退出。（需要桌宠获得焦点的时候才能接收到键盘事件）
程序启动时会读取程序根目录下的settings.config文件，它储存了程序的设置，根据需要可以手动更改。
目录下的assets文件夹里面是素材，角色文件在char文件夹下，可以自己加入角色（素材自己准备），每个角色的文件夹的格式都是统一的，包含下面三个文件夹：
painting	角色的立绘图片文件，暂不支持表情。
sdchar	角色的SD小人文件。角色X的SD小人动画包含三个文件，X.atlas，X.skel，X.png。
voice	角色的语音文件，格式为16位深度，采样率为44100Hz。

关于皮肤：
皮肤如果以数字表示，则1表示默认皮肤，2及以上为其他的皮肤。如果皮肤为g，则表示改造。如果为h，则表示婚舰。立绘和SD小人素材均需要按照这个格式进行命名，如果你解包得到的素材不是这样命名的，那么请手动重命名，否则会因为找不到素材文件而程序崩溃。
假如舰娘X有1个婚舰皮肤，1个改造皮肤，2个其他皮肤，则它们的命名应该分别为（以立绘图片名为例）：
X.png	第1号皮肤，即原始立绘
X_2.png	第2号皮肤
X_3.png	第3号皮肤
X_h.png	婚舰皮肤
X_g.png	改造皮肤
SD小人的素材文件同理。
但是请注意，语音文件的命名与此不同，默认语音、婚舰语音和改造语音命名规则和上面一样，其他的皮肤数字会减一。这个命名规则来源于BlhxCueDecoder解码得到的语音文件名字，以login语音为例。
login.wav		默认语音
login_1.wav	第2号皮肤语音
login_2.wav	第3号皮肤语音
login_h.wav	婚舰皮肤语音
login_g.wav	改造皮肤语音

文件命名的格式（仍以角色X为例）
立绘文件：X.png（如果有皮肤，则以X_2.png表示第2号皮肤的立绘文件，第1号皮肤即是原始立绘，直接写成X.png即可）可以使用AzurLanePaintingTool进行提取（请手动取消选择“使用中文名作为文件导出名”，这样你就无需重命名文件）
SD小人文件：直接使用AssetStudio提取出来的文件即可，注意后缀名在上面已经提到，如果提取到的文件像X.atlas.asset或者X.atlas.txt这样多了一个后缀，直接删去多余的后缀即可。如果需要重命名，那么请记住，以文本模式打开atlas文件并把第一行的X.png改成新的png文件名。
语音：仅支持wav文件。所有角色的语音名字应该都相同，如X和Y登录的语音都是login.wav，但是它们放在不同角色的voice文件夹下。直接使用BlhxCueDecoder解码得到的语音文件即可（部分语音可能需要重新命名！尤其是婚舰和改造语音都需要重命名，另外部分皮肤的顺序是混乱的，也需要手动重命名）。同一个角色，不同的皮肤，它们的语音文件也在同一个voice文件夹下，不过命名格式和上述的立绘一样，以login为例，原始立绘的语音命名为login.wav，第2号皮肤的语音命名为login_2.wav。由于有的皮肤的特有语音不完整（有些有特有语音，有些没有），如果皮肤的特有语音文件未找到，则使用原始立绘的语音。（和碧蓝航线本体一样）语音文件可能需要重命名，注意对照碧蓝航线wiki的台词进行识别具体属于哪个皮肤。

目前用到的语音文件仅有login，main_n，touch_n，（n为数字）其他的语音虽然也能用，但是目前不清楚该用在哪里。

settings.config配置详解
char_name	角色的名字，程序寻找素材时使用，即assets/char文件夹下的文件夹名字。如果不存在程序会崩溃
skin		角色的皮肤，原始立绘为1，如果有其他皮肤就写序号，如果皮肤不存在程序会崩溃。
main_bgm_on	设定立绘模式下是否开启BGM，默认开启。
backyard_bgm_on	设定SD小人模式下是否开启BGM，默认开启。
main_voice_on	设定立绘模式下是否开启语音，默认开启。
backyard_voice_on	设定SD小人模式下是否开启语音，默认开启。
ui_sound_on	设定是否打开UI声音。目前只包括点击和拖拽SD小人的声音。
painting_scale	缩放立绘的因子。
sd_scale		缩放SD小人的因子。
default_mode	设定程序启动时默认的模式，可以是立绘模式，也可以是SD小人模式，分别为painting和sd。（严格区分大小写）
floating_amplitude	设置立绘浮动的幅度，为0表示立绘静止，越大则浮动复读越大。
floating_time	一个浮动周期的时间
jump_height	设置立绘点击时的跳跃高度，为0则表示不跳跃。
jump_time	设置完成一次跳跃所用的时间。
voice_interval	设定放置时随机播放语音的时间间隔。如果设置得太短，那么将会非常吵。
voice_volume	设置语音的音量。
main_bgm_volume	设置立绘模式的BGM音量。
backyard_bgm_volume设置SD小人模式的BGM音量。
ui_sound_volume	设置UI音量。
fps_limit		设置FPS限制。由于屏幕刷新率为60，故帧率只在60及以下。设置太大不但占用资源，并且效果也不显著，设置成30即可。
如果图像存在颜色混合错误或透明错误问题，请仔细阅读下面的描述并更改参数进行调整。
transparent_color_filter_tolerance
设置背景色的选择的容错性。桌宠透明的原理为选择一个灰度颜色（从纯黑色到纯白色过渡）作为背景色，然后将其透明掉。但是这存在一个问题，如果背景色和立绘/SD小人的图像有相同的颜色，那么图像中的那些颜色将会被错误地透明掉。为了防止这种情况的发生，你可以选择性地更改这个参数。假定这个参数被设定为x，则立绘与SD小人图像中共有x个像素会被透明掉。在缩放的时候由于会重采样导致像素值变化，所以也有可能会被错误地透明掉，但是影响不大。有时候你不得不做出取舍，如果设置为0会有图像错误的话，可以试着设置一个较小的整数值。
